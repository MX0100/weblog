# ======================================
# Staging Environment Configuration
# ======================================
# This profile simulates production environment for testing
# Used for pre-production validation and integration testing

# ======================================
# API Configuration
# ======================================
server.servlet.context-path=/api
server.port=8080
server.compression.enabled=true

# ======================================
# Database Management (ç”Ÿäº§æ¨¡å¼)
# ======================================
# ğŸ”’ ä½¿ç”¨Flywayç®¡ç†æ•°æ®åº“è¿ç§»
spring.jpa.hibernate.ddl-auto=validate
spring.sql.init.mode=never

# ğŸ”„ Flyway é…ç½®
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.table=schema_version

# ğŸ“Š æ•°æ®åº“é…ç½®
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ======================================
# Development Tools (ç¦ç”¨)
# ======================================
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false
spring.devtools.add-properties=false

# ======================================
# Logging Configuration (æµ‹è¯•ç¯å¢ƒ)
# ======================================
logging.level.root=INFO
logging.level.io.github.mx0100.weblog=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.flywaydb=INFO

# ğŸ“ æ—¥å¿—æ–‡ä»¶é…ç½®
logging.file.name=logs/staging-application.log
logging.file.max-size=50MB
logging.file.max-history=7

# ======================================
# Security Configuration (æµ‹è¯•çº§)
# ======================================
server.error.include-stacktrace=on-param
server.error.include-message=on-param

# ======================================
# Performance Configuration
# ======================================
# ğŸš€ è¿æ¥æ± é…ç½®
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=900000
spring.datasource.hikari.connection-timeout=20000

# ğŸ“ˆ JPA æ€§èƒ½é…ç½®
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ======================================
# Monitoring & Health (æµ‹è¯•ç¯å¢ƒ)
# ======================================
management.endpoints.web.exposure.include=health,info,metrics,flyway
management.endpoint.health.show-details=when-authorized
management.health.mail.enabled=false
management.health.diskspace.enabled=true
management.health.db.enabled=true

# ======================================
# Cache Configuration (Redisæµ‹è¯•)
# ======================================
spring.cache.type=redis
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8

# ======================================
# CORS Configuration (æµ‹è¯•é™åˆ¶)
# ======================================
cors.allowed-origins=${CORS_ORIGINS:http://localhost:3000,https://staging.your-domain.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,X-Requested-With
cors.allow-credentials=true
cors.max-age=3600

# ======================================
# Test Data Configuration
# ======================================
# ğŸ§ª å…è®¸æµ‹è¯•æ•°æ®åˆ›å»ºï¼ˆä»…æµ‹è¯•ç¯å¢ƒï¼‰
app.test-data.enabled=${ENABLE_TEST_DATA:false}
app.test-data.cleanup-on-startup=${CLEANUP_TEST_DATA:false} 